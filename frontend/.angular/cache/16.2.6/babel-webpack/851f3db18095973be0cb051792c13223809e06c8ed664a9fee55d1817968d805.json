{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/petri/OneDrive/Desktop/pia projekat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { firstValueFrom } from 'rxjs';\nexport let HomePageUnregistredComponent = class HomePageUnregistredComponent {\n  constructor(restaurantService, userService, reservationService) {\n    this.restaurantService = restaurantService;\n    this.userService = userService;\n    this.reservationService = reservationService;\n    this.totalRestaurants = 0;\n    this.totalGuests = 0;\n    this.reservationsLast24Hours = 0;\n    this.reservationsLast7Days = 0;\n    this.reservationsLast30Days = 0;\n    this.restaurants = [];\n    this.showingRestaurants = [];\n    this.searchName = '';\n    this.searchAddress = '';\n    this.searchType = '';\n    this.sortField = '';\n    this.sortType = 'asc';\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      let response = yield firstValueFrom(_this.reservationService.getNumberOfReservations());\n      _this.reservationsLast24Hours = response.Reservations24Hrs == null ? 0 : response.Reservations24Hrs;\n      _this.reservationsLast7Days = response.Reservations7Days == null ? 0 : response.Reservations7Days;\n      _this.reservationsLast30Days = response.Reservations30Days == null ? 0 : response.Reservations30Days;\n      _this.totalRestaurants = yield firstValueFrom(_this.restaurantService.getNumberOfRestaurants());\n      _this.totalGuests = yield firstValueFrom(_this.userService.getNumberOfGuests());\n      _this.restaurants = yield firstValueFrom(_this.restaurantService.getAllRestaurantsWithWorkers());\n      _this.showingRestaurants = [..._this.restaurants];\n    })();\n  }\n  search() {\n    this.showingRestaurants = [];\n    this.restaurants.forEach(restaurant => {\n      if (restaurant.restaurantName.toLowerCase().includes(this.searchName.toLowerCase()) && restaurant.restaurantAddress.toLowerCase().includes(this.searchAddress.toLowerCase()) && restaurant.typeOfRestaurant.toLowerCase().includes(this.searchType.toLowerCase())) {\n        this.showingRestaurants.push(restaurant);\n      }\n    });\n  }\n  reset() {\n    this.showingRestaurants = [...this.restaurants];\n    this.searchName = '';\n    this.searchAddress = '';\n    this.searchType = '';\n    this.sortField = '';\n    this.sortType = 'asc';\n  }\n  sort() {\n    if (this.sortField == 'name') {\n      if (this.sortType == 'asc') {\n        this.showingRestaurants.sort((a, b) => a.restaurantName.localeCompare(b.restaurantName));\n      } else {\n        this.showingRestaurants.sort((a, b) => b.restaurantName.localeCompare(a.restaurantName));\n      }\n    } else if (this.sortField == 'address') {\n      if (this.sortType == 'asc') {\n        this.showingRestaurants.sort((a, b) => a.restaurantAddress.localeCompare(b.restaurantAddress));\n      } else {\n        this.showingRestaurants.sort((a, b) => b.restaurantAddress.localeCompare(a.restaurantAddress));\n      }\n    } else if (this.sortField == 'type') {\n      if (this.sortType == 'asc') {\n        this.showingRestaurants.sort((a, b) => a.typeOfRestaurant.localeCompare(b.typeOfRestaurant));\n      } else {\n        this.showingRestaurants.sort((a, b) => b.typeOfRestaurant.localeCompare(a.typeOfRestaurant));\n      }\n    }\n  }\n};\nHomePageUnregistredComponent = __decorate([Component({\n  selector: 'app-home-page-unregistred',\n  templateUrl: './home-page-unregistred.component.html',\n  styleUrls: ['./home-page-unregistred.component.css']\n})], HomePageUnregistredComponent);","map":{"version":3,"names":["Component","firstValueFrom","HomePageUnregistredComponent","constructor","restaurantService","userService","reservationService","totalRestaurants","totalGuests","reservationsLast24Hours","reservationsLast7Days","reservationsLast30Days","restaurants","showingRestaurants","searchName","searchAddress","searchType","sortField","sortType","ngOnInit","_this","_asyncToGenerator","response","getNumberOfReservations","Reservations24Hrs","Reservations7Days","Reservations30Days","getNumberOfRestaurants","getNumberOfGuests","getAllRestaurantsWithWorkers","search","forEach","restaurant","restaurantName","toLowerCase","includes","restaurantAddress","typeOfRestaurant","push","reset","sort","a","b","localeCompare","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\petri\\OneDrive\\Desktop\\pia projekat\\frontend\\src\\app\\components\\home-page-unregistred\\home-page-unregistred.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { firstValueFrom } from 'rxjs';\nimport { RecentReservations } from 'src/app/response/RecentReservations';\nimport { RestaurantsWithWorkers } from 'src/app/response/RestaurantsWithWorkers';\nimport { ReservationsService } from 'src/app/service/Reservations/reservations.service';\nimport { RestaurantService } from 'src/app/service/Restaurant/restaurant.service';\nimport { UserService } from 'src/app/service/User/user.service';\n\n@Component({\n  selector: 'app-home-page-unregistred',\n  templateUrl: './home-page-unregistred.component.html',\n  styleUrls: ['./home-page-unregistred.component.css']\n})\nexport class HomePageUnregistredComponent {\n  totalRestaurants: Number = 0;\n  totalGuests: Number = 0;\n  reservationsLast24Hours: Number = 0;\n  reservationsLast7Days: Number = 0;\n  reservationsLast30Days: Number = 0;\n  restaurants: Array<RestaurantsWithWorkers>= [];\n  showingRestaurants: Array<RestaurantsWithWorkers>= [];\n  searchName: string = '';\n  searchAddress: string = '';\n  searchType: string = '';\n  sortField: string = '';\n  sortType: string = 'asc';\n  constructor( private restaurantService : RestaurantService,private userService:UserService,private reservationService:ReservationsService) { }\n\n  async ngOnInit() {\n    let response=await firstValueFrom( this.reservationService.getNumberOfReservations()) as RecentReservations\n    this.reservationsLast24Hours = response.Reservations24Hrs==null?0:response.Reservations24Hrs;\n    this.reservationsLast7Days = response.Reservations7Days==null?0:response.Reservations7Days;\n    this.reservationsLast30Days = response.Reservations30Days==null?0:response.Reservations30Days;\n    this.totalRestaurants = await firstValueFrom( this.restaurantService.getNumberOfRestaurants());\n    this.totalGuests = await firstValueFrom( this.userService.getNumberOfGuests());\n    this.restaurants=await firstValueFrom( this.restaurantService.getAllRestaurantsWithWorkers()) as Array<RestaurantsWithWorkers>\n    this.showingRestaurants = [...this.restaurants];\n\n  }\n\n\n\n  search(): void {\n    this.showingRestaurants = [];\n    this.restaurants.forEach(restaurant => {\n      if (restaurant.restaurantName.toLowerCase().includes(this.searchName.toLowerCase()) &&\n          restaurant.restaurantAddress.toLowerCase().includes(this.searchAddress.toLowerCase()) &&\n          restaurant.typeOfRestaurant.toLowerCase().includes(this.searchType.toLowerCase())) {\n        this.showingRestaurants.push(restaurant);\n      }\n    });\n\n  }\n  reset(): void {\n    this.showingRestaurants = [...this.restaurants];\n    this.searchName = '';\n    this.searchAddress = '';\n    this.searchType = '';\n    this.sortField = '';\n    this.sortType = 'asc';\n  }\n\n  sort(){\n    if(this.sortField=='name'){\n      if(this.sortType=='asc'){\n        this.showingRestaurants.sort((a,b)=>a.restaurantName.localeCompare(b.restaurantName))\n      }else{\n        this.showingRestaurants.sort((a,b)=>b.restaurantName.localeCompare(a.restaurantName))\n      }\n    }else if(this.sortField=='address'){\n      if(this.sortType=='asc'){\n        this.showingRestaurants.sort((a,b)=>a.restaurantAddress.localeCompare(b.restaurantAddress))\n      }else{\n        this.showingRestaurants.sort((a,b)=>b.restaurantAddress.localeCompare(a.restaurantAddress))\n      }\n    }else if(this.sortField=='type'){\n      if(this.sortType=='asc'){\n        this.showingRestaurants.sort((a,b)=>a.typeOfRestaurant.localeCompare(b.typeOfRestaurant))\n      }else{\n        this.showingRestaurants.sort((a,b)=>b.typeOfRestaurant.localeCompare(a.typeOfRestaurant))\n      }\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}